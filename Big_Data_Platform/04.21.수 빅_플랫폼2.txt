04.21.수 빅_플랫폼2
드라이브
https://drive.google.com/drive/folders/1bVC34442dP2dqTGO0x8Ve149yp4E8Piw

* 빅데이터 수집
- 웹 정보 수집
- 센저 정보 수집
ex) Smart Car(아무 IOT장비)
1) Smart Car의 상태를 하루종일 저장한다.
2) 0시가 되면 저장한 상태를 클라우드나 서버(어제 생성했던 가짜 도메인)에 upload한다.
3) Smart Car 운행정보도 있다. 
4) 운행정보를 1초마다 전송된다.(운행정보를 수신받는 프로그램이 있어야한다)
5) 운행정보를 수신받는 프로그램이 정보를 받는다.

* 플럼 
플럼을 이용하여 스마트카 로그 수집
- 스마트카 상태정보 데이터는 3초마다 발생해서 스마트카 내부에 저장된다.(스마트카 안에 CPU,RAM,SSD가 있다.)
- 정해진 서버, 폴더에 새로 업로드된 파일을 감시하닥 올라오면 하둡에다가 저장한다.
- 0시마다 본인이 타이핑하는게 아닌 플럼이 자동으로 올린다.

* 플롬 아키텍쳐
Source : 특정 폴더에 새로운 파일이 업로드 되었는지 감시하다가 새로운 파일이 업로드되면 해당 파일의 내용을 1줄씩 읽어온다.
Channel : 1줄씩 읽어들이고 데이터를 임시 저장한다.
Sink : 분산 처리 시스템을 사용해서 싱크는 동시에 한줄씩 읽어오면서 파일을 하둡에서 저장한다.
싱크가 불러와서 파일을 만드는 줄의 수와 동시에 처리하는 싱크의 수는 설정에서 조절할 수 있다.
(ppt87 그림 추가하기)

* 로그 파일 저장할 폴더 생성 - server02
putty를 열어서 server02를 실행시키는데 하기전에 먼저 server02가 vritual로 실행되고 있어야한다.
1) 강의 ppt 89p부터 따라하면서 스마트카를 업로드할 파일을 생성한다
2) 강의 ppt 91p에는 폴더가 있는지 확인한다.

실습해보기 
1. 자바 가짜 자동차 상태정보 파일 생성(강의 ppt 97p)
2. 가짜 자동차 정보 상태 확인(강의 ppt 98p) : 메모장이 없어서 명령어 입력해야한다.
3. 플럼 재시작(강의 ppt 108p  :이미 설치되어있으니 시작 대신에 재시작하기 ~ 110p)
4. 플럼 정보 설정(강의 ppt 111p ~ 114p)
5. 가짜 상태정보 생성 후 HDFS에 저장되어있는지 확인(강의 ppt 115p ~ 118p)

5) 빅데이터 실시간 적제
하드디스크가 꽉차고 메모리가 부족하다면
www.server01.com:7801 -> hbase -> 역할 인스턴스 추가 -> 호스트 선택 -> ip, 도메인을 쓰고 검색하고 확인하면 연결이 되는데 인터넷이 연결이 되어있어야한다.
연결하면 데이터를 나눠갖는거고 등록한 컴퓨터에는 자동으로 hbase가 자동으로 설치되는데 설치된 후에 데이터를 나눠갖는다.

5-1) Hbas
Hbas실습하기
1. HBASE 재시작(강의 ppt 143p ~ 146p)
2. HBASE 쿼리 실습(강의 ppt 153p ~ 171p)

p.178
파이썬 스파크를 사용할 건데 데이터를 옮기는걸 쉽제 짤 수 있는 도구이다.
책에서는 스톰을 사용했지만 스톰은 자바로 이루어져있고 우리는 파이썬을 사용하는 스파크를 사용할 예정이다.


6-1) 카프카 실습하기
1. 카프카 재시작(강의 ppt 193p ~ 195p) : 메모리가 부족해서 다운될 수도 있어서 재시작하기
2. SmartCar-Topic 창고 지우기: 교재 130p 맨 마지막을 참조
카프카 삭제 : kafka-topics --delete --zookeeper server02.hadoop.com:2181 --topic 토픽명
3. 창고만들기(강의 ppt 197p ~ 198p)
4. producer 일꾼한테 창고에 데이터 저장하라고 시키기(강의 ppt 199p)
5. consumer 일꾼한테 창고에 있는 데이터 다가져오라고 시키기(강의 ppt 200p)

